<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>PS70: Felicia Liang</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=https://fonts.googleapis.com/css?family=Inconsolata:400,500,600,700|Raleway:400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/arduino-light.min.css" rel="stylesheet" >
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/arduino.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 

  <!-- =======================================================
  * Template Name: MyPortfolio - v4.9.0
  * Template URL: https://bootstrapmade.com/myportfolio-bootstrap-portfolio-website-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Navbar ======= -->
  <div class="collapse navbar-collapse custom-navmenu" id="main-navbar">
    <div class="container py-2 py-md-5">
      <div class="row align-items-start">
        <div class="col-md-2">
          <ul class="custom-menu">
            <li class="active"><a href="index.html">Projects</a></li>
            <li><a href="about.html">About Me</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
        <div class="col-md-6 d-none d-md-block  mr-auto">
          <div class="tweet d-flex">
            <div>
              <p><em>Welcome to my PS70 portfolio! Here you will find weekly progress of my digital fabrication journey.</em></p>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <nav class="navbar navbar-light custom-navbar">
    <div class="container">
      <a class="navbar-brand" href="index.html">PS70: Intro to Digital Fabrication</a>
      <a href="#" class="burger" data-bs-toggle="collapse" data-bs-target="#main-navbar">
        <span></span>
      </a>
    </div>
  </nav>


  <!-- ======= Main Content======= -->

   <main id="main">

    <section class="section">
      <div class="container">
        <div class="row mb-4 align-items-center">
          <div class="col-md-12" data-aos="fade-up" data-aos-delay="50">
            <h2>09: radio, wifi, bluetooth (IoT)</h2>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="row mb-5 align-items-center">
          <div class="col-md-12" data-aos="fade-up" data-aos-delay="50" data-aos-delay="50">
            <p>This week's assignment was to program a microcontroller to obtain and respond to information from the internet/radio, with at least one input and output. I collaborated with <a href="https://rebeccabrand.github.io/ps-70-fall-22/index.html">Rebecca Brand</a> this week to tackle the idiosyncracies of Arduino.</p>
          </div>
        </div>
      </div>

   <div class="container">
        <div class="row mb-5 align-items-center">
          <div class="col-md-6" data-aos="fade-up" data-aos-delay="50" data-aos-delay="50">
            <h3 class="h3">1. Simple Wifi Server with ESP32</h3>
            <p>We started by setting up a <a href="https://nathanmelenbrink.github.io/lab/networking/huzzah1.html">Wifi Server</a> so we could control our ESP32 board over wifi. We were able to set it up so that we were able to turn an LED on/off by clicking on the links in our browser.</p>
          </div>
          <div class="col-md-1" data-aos="fade-up" data-aos-delay="50" data-aos-delay="50"></div>
          <div class="col-md-5" data-aos="fade-up" data-aos-delay="50" data-aos-delay="50">
            <img src="09_IoT/simplewifi.png" alt="Image" class="img-fluid">
          </div>
        </div>
      </div>


   <div class="container">
        <div class="row mb-5 align-items-center">
          <div class="col-md-12" data-aos="fade-up" data-aos-delay="50" data-aos-delay="50">
            <h3 class="h3">2. Firebase + ESP32 + LED</h3>
            <p> We followed <a href="https://nathanmelenbrink.github.io/lab/networking/huzzah1b.html">this tutorial</a> to control an LED through a Firebase Server.</p>
          </div>
          <div class="col-md-6" data-aos="fade-up" data-aos-delay="50">
            <video width="600" controls>
              <source src="09_IoT/LED_firebase.mp4" type="video/mp4">
            Your browser does not support the video tag.
            </video>
            <figcaption>Turn LED on/off by setting value of string to "ON" or "OFF" in Firebase Realtime Database.</figcaption>
          </div>
          <div class="col-md-6" data-aos="fade-up" data-aos-delay="50">
            <video width="600" controls>
              <source src="09_IoT/LED_UI.mp4" type="video/mp4">
            Your browser does not support the video tag.
            </video>
            <figcaption>Turn LED on/off by clicking the "Turn On" or "Turn Off" button.</figcaption>
          </div>
        </div>
      </div>

   <div class="container">
        <div class="row mb-5 align-items-center">
          <div class="col-md-6" data-aos="fade-up" data-aos-delay="50" data-aos-delay="50">
            <h3 class="h3">3. ESP32 + Stepper Motor</h3>
            <p>For our final project, we want to create a drawing machine that injects ink into water based on certain inputs. To start on the prototype, we 3D printed a syringe holder that is attached to a stepper motor. When the stepper motor runs, the holder depresses the plunger.</p>
            <p>We followed <a href="https://randomnerdtutorials.com/esp32-stepper-motor-28byj-48-uln2003/">this tutorial</a> to connect the stepper motor to the ESP32 via an ULN2003 motor driver and powered it with an Arduino Uno that was connected to our laptop.</p>
          </div>
          <div class="col-md-6" data-aos="fade-up" data-aos-delay="50">
            <img src="09_IoT/stepper_schematic.png" alt="Image" class="img-fluid">
          </div>
          <div class="col-md-12" data-aos="fade-up" data-aos-delay="50">
            <b>ARDUINO CODE</b>
            <pre><code class="language-arduino">
/*
  Rui Santos
  Complete project details at https://RandomNerdTutorials.com/esp32-stepper-motor-28byj-48-uln2003/
  
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files.
  
  The above copyright notice and this permission notice shall be included in all
  copies or substantial portions of the Software.
  
  Based on Stepper Motor Control - one revolution by Tom Igoe
*/

#include "Stepper.h"

const int stepsPerRevolution = 2048;  // change this to fit the number of steps per revolution

// ULN2003 Motor Driver Pins
#define IN1 19
#define IN2 18
#define IN3 10
#define IN4 4

// initialize the stepper library
Stepper myStepper(stepsPerRevolution, IN1, IN3, IN2, IN4);

void setup() {
  // set the speed at 5 rpm
  myStepper.setSpeed(5);
  // initialize the serial port
  Serial.begin(115200);
}

void loop() {
  // step one revolution in one direction:
  Serial.println("clockwise");
  myStepper.step(stepsPerRevolution);
  delay(1000);

  // step one revolution in the other direction:
  Serial.println("counterclockwise");
  myStepper.step(-stepsPerRevolution);
  delay(1000);
}
              </code>
            </pre>
        </div>
      </div>

   <div class="container">
        <div class="row mb-5 align-items-center">
          <div class="col-md-12" data-aos="fade-up" data-aos-delay="50" data-aos-delay="50">
            <h3 class="h3">4. Firebase + ESP32 + Stepper Motor</h3>
            <p>Finally, we tried to connect the the ESP32 and stepper motor to Firebase so that we could control the motor over Wifi. It worked! We'll likely build on this prototype over the next few weeks and incorporate it into the "machine building" assignment and ultimately our final project.</p>
          </div>
          <div class="col-md-6" data-aos="fade-up" data-aos-delay="50">
            <video width="600" controls>
              <source src="09_IoT/stepper_firebase.mp4" type="video/mp4">
            Your browser does not support the video tag.
            </video>
            <figcaption>Turn stepper motor on/off by setting value of string to "ON" or "OFF" in Firebase Realtime Database. Note that the syringe wasn't depressed in this video because we didn't line the gears up properly.</figcaption>
          </div>
          <div class="col-md-6" data-aos="fade-up" data-aos-delay="50">
            <video width="600" controls>
              <source src="09_IoT/stepper_ui.mp4" type="video/mp4">
            Your browser does not support the video tag.
            </video>
            <figcaption>Turn stepper motor on/off by clicking the "Turn On" or "Turn Off" button. The syringe dispenser works!</figcaption>
          </div>
        </div>
    </div>


      <div class="container">
        <div class="row mb-4 align-items-center">
          <div class="col-md-12" data-aos="fade-up" data-aos-delay="50">
            <b>ARDUINO CODE</b>
            <pre><code class="language-arduino">
#include "WiFi.h"                                // esp32 library
#include "FirebaseESP32.h"                      // firebase library
#include "Stepper.h"


#define FIREBASE_HOST "https://ps70-week-9-default-rtdb.firebaseio.com/"  // the project name address from firebase id
#define FIREBASE_AUTH "2eCvifu0nm6sZbEiz8NMaCrHV9wRS21cMwPCOcDF"    
#define WIFI_SSID "MAKERSPACE"                                // input your home or public wifi name
#define WIFI_PASSWORD "12345678"                            // password of wifi ssid

// ULN2003 Motor Driver Pins
#define IN1 19
#define IN2 18
#define IN3 10
#define IN4 4


String fireString = "";                                          received from firebase
const int stepsPerRevolution = 2048;  // change this to fit the number of steps per revolution

// initialize the stepper library
Stepper myStepper(stepsPerRevolution, IN1, IN3, IN2, IN4);

//Define FirebaseESP32 data object
FirebaseData firebaseData;

void setup() {
  // set the speed at 5 rpm
  myStepper.setSpeed(15);
  // initialize the serial port
  Serial.begin(115200);
  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);                          // try to connect with wifi

  Serial.print("Connecting to ");
  Serial.print(WIFI_SSID);
  while (WiFi.status() != WL_CONNECTED) {
    Serial.print(".");
    delay(500);
  }

  Serial.println();
  Serial.print("Connected to ");
  Serial.println(WIFI_SSID);
  Serial.print("IP Address is : ");
  Serial.println(WiFi.localIP());                                // print local IP address
  Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);                  // connect to firebase
  Firebase.reconnectWiFi(true);
  Firebase.set(firebaseData, "/STEPPER", "OFF");              // set initial string of "OFF"

}

void loop() {

  Firebase.get(firebaseData, "/STEPPER");                     // get stepper status input from firebase
  fireString = firebaseData.stringData();                        // change to e.g. intData() or boolData(

  if (fireString == "ON") {                    // compare the input of stepper status received from firebase
    Serial.println("Stepper Turned ON");
    myStepper.step(-stepsPerRevolution);              // make output stepper
    }

  else if (fireString == "OFF") {              // compare the input of stepper status received from firebase
    Serial.println("Stepper Turned OFF");
    myStepper.step(0); 
      }


}
              </code>
            </pre>
          </div>
        </div>
      </div>



    </section>

  </main><!-- End #main -->
  

  <!-- ======= Footer ======= -->
  <footer class="footer" role="contentinfo">
    <div class="container">
      <div class="row">
        <div class="col-sm-6">
          <p class="mb-1">&copy; Felicia Liang 2022</p>
          </div>
        <div class="col-sm-6 social text-md-end">
          <a href="https://www.instagram.com/wanderies_/"><span class="bi bi-instagram"></span></a>
          <a href="https://www.linkedin.com/in/feliciasliang/"><span class="bi bi-linkedin"></span></a>
        </div>
      </div>
    </div>
  </footer>


  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>